<div class="p-d-flex p-flex-column" style="padding:5vw;" *ngIf="!hideLoader">
    <div id="modalInnerLoader"></div>
    <div id="modalInnerLoaderText">Loading...</div>
</div>


<div class="pfTable">
    <p-table #cfp id="pfTable" width="100%" [columns]="CFColumns" [value]="CFRows" exportFilename="Client Positive Feedback" [rowsPerPageOptions]="[10,25,50]" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [style]="{'font-size':'13px','min-height': '400px'}" styleClass="p-datatable-cactus p-datatable-gridlines" [hidden]="hideTable">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns" [pSortableColumn]="col.field" [ngStyle]="{'width':col.field === '' ? '3em' : col.field === 'ID' ? '8em' : ''}">
                    <div class="p-d-flex p-jc-between p-ai-center">
                        {{col.header}}
                        <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" *ngIf="col.field !== ''" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                        <p-columnFilter *ngIf="col.header != '' && col.field !=='Resources' " [field]="col.field" matchMode="in" display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false">
                            <ng-template pTemplate="header">
                                <div class="p-px-3 p-pt-3 p-pb-0">
                                    <span class="p-text-bold"> {{col.header}} Picker</span>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-multiSelect [ngModel]="value" [options]="col.options" placeholder="All" (onChange)="filter($event.value)" optionLabel="label">
                                    <ng-template let-option pTemplate="item">
                                        <div class="p-multiselect-representative-option">
                                            <span class="p-ml-1">{{option.label}}</span>
                                        </div>
                                    </ng-template>
                                </p-multiSelect>
                            </ng-template>
                        </p-columnFilter>

                        <p-columnFilter *ngIf="col.header != ''  && col.field ==='Resources' " type="text" [field]="col.field" matchMode="contains" display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false"></p-columnFilter>

                    </div>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr>
                <td *ngFor="let col of columns">
                    <ng-container *ngIf="col.field != 'Title' && col.field != 'SentDate' && col.field != 'SentBy' && col.field != 'Status' && col.field != 'Actions' &&  col.field != ''">
                        {{rowData[col.field]}}
                    </ng-container>
                    <ng-container *ngIf="col.field == 'Title'">
                        <a [href]="rowData['fullUrl']" download>{{rowData[col.field]}}</a>
                    </ng-container>
                    <ng-container *ngIf="col.field == 'SentDate'">
                        {{rowData[col.field] | date: 'MMM d, yyyy'}}
                    </ng-container>
                    <ng-container *ngIf="col.field == 'SentBy'">
                        {{rowData[col.field]}}
                    </ng-container>
                    <ng-container *ngIf="col.field == 'Status'">
                        {{rowData[col.field]}}<a class="inactiveIcon" title="Inactive Feedback" *ngIf="rowData['IsActive'] === false"><i class="fas fa-eye-slash"></i></a>
                    </ng-container>
                    <ng-container *ngIf="col.field == ''">
                        <div style="float: right">
                            <p-menu #menu [style]="{'width': '20em'}" [model]="items" [popup]="true" (clickOutside)="clickout($event)">
                            </p-menu>
                            <i class="pi pi-ellipsis-v" *ngIf="rowData['Status'] === 'Accepted'" style="font-size:2em;top: 100px !important;cursor: pointer;" (click)="menu.toggle($event);openMenuPopup(rowData)"></i>
                        </div>
                    </ng-container>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage" let-columns>
            <tr>
                <td [attr.colspan]="columns.length">
                    No Data found
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>