<div class="p-d-flex p-flex-column" style="padding: 5vw;" *ngIf="!hideLoader">
    <div id="modalInnerLoader"></div>
    <div id="modalInnerLoaderText">Loading...</div>
</div>


<div class="cdTable">
    <p-table #cd id="cdTable" [columns]="CDColumns" [value]="CDRows" exportFilename="Client Dissatisfaction" [rowsPerPageOptions]="[10,25,50]" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [style]="{'font-size':'13px','min-height': '400px'}"
        styleClass="p-datatable-cactus p-datatable-gridlines" [hidden]="hideTable">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns" [pSortableColumn]="col.field" [ngStyle]="{'width':col.field === '' ? '3em' : col.field === 'ID' ? '8em' : ''}">

                    <div class="p-d-flex p-jc-between p-ai-center">
                        {{col.header}}
                        <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" *ngIf="col.field !== '' " ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                        <p-columnFilter *ngIf="col.header != ''" [field]="col.field" matchMode="in" display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false">
                            <ng-template pTemplate="header">
                                <div class="p-px-3 p-pt-3 p-pb-0">
                                    <span class="p-text-bold"> {{col.header}} Picker</span>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-multiSelect [ngModel]="value" [options]="CDColArray[col.field]" placeholder="All" (onChange)="filter($event.value)" optionLabel="label">
                                    <ng-template let-option pTemplate="item">
                                        <div class="p-multiselect-representative-option">
                                            <span class="p-ml-1">{{option.label}}</span>
                                        </div>
                                    </ng-template>
                                </p-multiSelect>
                            </ng-template>
                        </p-columnFilter>
                    </div>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr>
                <td *ngFor="let col of columns">
                    <ng-container *ngIf="col.field != 'SentDate' && col.field != 'SentBy' && col.field != 'Title' &&  col.field != ''">
                        {{rowData[col.field]}}
                    </ng-container>
                    <ng-container *ngIf="col.field == 'SentDate'">
                        {{rowData[col.field] | date: 'MMM d, yyyy'}}
                    </ng-container>
                    <ng-container *ngIf="col.field == 'SentBy'">
                        {{rowData[col.field]}}
                    </ng-container>
                    <ng-container *ngIf="col.field == 'Title'">
                        <a [href]="rowData['FullUrl']" download>{{rowData[col.field]}}</a>
                    </ng-container>
                    <ng-container *ngIf="col.field == ''">
                        <div style="float: right">
                            <p-menu #menu [style]="{'width': '20em'}" [model]="items" [popup]="true"></p-menu>
                            <i (clickOutside)="clickout($event)" class="pi pi-ellipsis-v"  *ngIf="rowData['Status'] !== 'Deleted'" [hidden]="readOnly && rowData['Status'] === 'Created'" style="font-size:2em;top: 100px !important;cursor: pointer;" (click)="openMenuPopup(rowData,menu); menu.show($event);"></i>
                        </div>
                    </ng-container>
                </td>

            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage" let-columns>
            <tr>
                <td [attr.colspan]="columns.length">
                    No Data found
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>

<!-- <div class="tableLoader" [hidden]='hideLoader'>
    <div id="mainLoader"></div>
    <div id="mainLoaderText">Loading...</div>
</div> -->
<ng-template #popupLoader let-modal>
    <div class="modal-body">
        <div id="mainLoader"></div>
        <div id="mainLoaderText">Loading...</div>
    </div>
</ng-template>