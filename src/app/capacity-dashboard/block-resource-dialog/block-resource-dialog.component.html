<div class="p-d-flex p-flex-column" style="padding: 12vw;" *ngIf="modalloaderenable">
    <div id="modalInnerLoader"></div>
    <div id="modalInnerLoaderText">Loading...</div>
</div>


<div class="pdialogButton p-col-12 p-grid p-jc-end" *ngIf="!modalloaderenable">
    <button icon="pi pi-save" pButton pRipple type="button" (click)="SaveDetails()" label="Save" class="p-mx-2 p-button-raised p-button-danger cls_blockResSave"></button>

    <button type="button " pButton icon="pi pi-times " (click)="cancel(); " label="Cancel " class="p-mr-3 p-button-raised p-button-danger cls_blockResCancel"></button>
</div>



<div class="p-grid" *ngIf="!modalloaderenable">

    <form [formGroup]='BlockResourceForm' class="p-col" style="font-size: 13px;">

        <div class="editInvoiceHeight p-grid p-mt-2">

            <div class="p-col-12 p-md-12 p-lg-12 p-grid p-py-0">
                <div class="p-col-6 p-md-4 p-lg-3 blockResItem">Resources</div>
                <div class="p-col-6 p-md-8 p-lg-9 blockResItem">
                    <p-dropdown resetFilterOnHide="true" [disabled]="readonly" class="cls_blockResResources p-fluid" [options]="Resources" [showClear]="true" formControlName="Resource" placeholder="Select Resource" [filter]="true" optionLabel="label"></p-dropdown>

                    <!-- optionLabel="label" (onChange)=setBudgetHoursValidation()></p-dropdown> -->
                    <div *ngIf="isBlockResourceFormSubmit && BlockResourceForm.controls.Resource.errors">
                        <div *ngIf="BlockResourceForm.controls.Resource.errors.required" class="error">
                            Please provide Resource.</div>
                    </div>
                </div>
            </div>
            <div class="p-col-12 p-md-12 p-lg-12 p-grid p-py-0">
                <div class="p-col-6 p-md-4 p-lg-3 blockResItem">Title</div>
                <div class="p-col-6 p-md-8 p-lg-9 blockResItem">
                    <input type="text" pInputText class="p-col-12 cls_blockResTitle" formControlName="Title" />
                    <div *ngIf="isBlockResourceFormSubmit && BlockResourceForm.controls.Title.errors">
                        <div *ngIf="BlockResourceForm.controls.Title.errors.required" class="error">Please provide Title.</div>
                    </div>
                </div>
            </div>

            <div class="p-col-12 p-md-12 p-lg-12 p-grid p-py-0">
                <div class="p-col-6 p-md-4 p-lg-3 blockResItem">Start Date</div>
                <div class="p-col-6 p-md-8 p-lg-9 blockResItem">

                    <p-calendar styleClass="pCalendarBtn" [disabled]="readonly" [showIcon]="true" class="cls_blockResStartDate" [minDate]="SDminDateValue" [maxDate]="SDmaxDateValue" placeholder="Select Start Date" [disabledDays]="[0,6]" dateFormat="M dd, yy" yearRange="{{yearsRange}}"
                        appendTo="body" [monthNavigator]="true" [yearNavigator]="true" formControlName="StartDate" (onClose)="SetDateValidation('startDate')"></p-calendar>

                    <div *ngIf="isBlockResourceFormSubmit && BlockResourceForm.controls.StartDate.errors">
                        <div *ngIf="BlockResourceForm.controls.StartDate.errors.required" class="error">Please provide Start Date.</div>
                    </div>
                </div>
            </div>

            <div class="p-col-12 p-md-12 p-lg-12 p-grid p-py-0">
                <div class="p-col-6 p-md-4 p-lg-3 blockResItem">End Date</div>
                <div class="p-col-6 p-md-8 p-lg-9 blockResItem">

                    <p-calendar styleClass="pCalendarBtn" [disabled]="readonly" [showIcon]="true" class="cls_blockResEndDate" [minDate]="EDminDateValue" [maxDate]="EDmaxDateValue" placeholder="Select End Date" [disabledDays]="[0,6]" dateFormat="M dd, yy" yearRange="{{yearsRange}}"
                        appendTo="body" [monthNavigator]="true" [yearNavigator]="true" formControlName="EndDate" (onClose)="SetDateValidation('endDate')"></p-calendar>

                    <div *ngIf="isBlockResourceFormSubmit && BlockResourceForm.controls.EndDate.errors">
                        <div class="error" *ngIf="BlockResourceForm.controls.EndDate.errors.required">Please provide End Date.</div>
                    </div>
                </div>
            </div>

            <div class="p-col-12 p-md-12 p-lg-12 p-grid p-py-0">
                <div class="p-col-6 p-md-4 p-lg-3 blockResItem">Expected Time</div>
                <div class="p-col-12 p-md-8 p-lg-9 blockResItem p-grid p-m-0">

                    <input type="number" onchange="validity.valid||(value='0');" step="0.25" pInputText formControlName="ExpectedTime" max={{maxExpectedHrs}} value="0" [ngClass]="isViewAllocation ? 'p-col-8 p-mb-1 cls_blockResExpectedTime' : 'p-col p-mb-1 cls_blockResExpectedTime'"
                    />
                    <ng-container *ngIf="isViewAllocation">
                        <button pButton pRipple (click)="viewAllocation('')" class="viewAllocation ui-button-danger" type="button" icon='pi pi-sliders-h' class="p-button-outlined p-button-danger p-mx-1"></button>
                        <button pButton pRipple (click)="showOverlayPanel($event, dailyAllocateOP)" title="Click to see allocation split" class="viewAllocation ui-button-danger" type="button" icon='pi pi-info-circle' class="p-button-outlined p-button-danger">      
                        </button>
                    </ng-container>
                    <div class="p-mt-4">
                        <app-allocation-overlay #dailyAllocateOP></app-allocation-overlay>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>