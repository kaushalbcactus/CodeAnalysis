<p-table #uf id='scorecardTable' [columns]="UFColumns" [value]="UFRows" exportFilename="Internal Feedback" [hidden]="hideTable" [rowsPerPageOptions]="[10,25,50]" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [style]="{'font-size':'13px'}" styleClass="p-datatable-cactus p-datatable-gridlines" stateStorage="local" stateKey="feedbacksTable">
    <ng-template pTemplate="header" let-columns>
        <tr>
            <th *ngFor="let col of columns" [pSortableColumn]="col.field" [hidden]="!col.visibility">
                <!-- {{col.header}}
                <p-sortIcon [field]="col.field" ariaLabel="Activate to sort"
                    ariaLabelDesc="Activate to sort in descending order"
                    ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon> -->
                <div class="p-d-flex p-jc-between p-ai-center">
                    {{col.header}}
                    <p-sortIcon [field]="col.field"></p-sortIcon>
                    <p-columnFilter *ngIf="col.header != '' && col.field !='Comments'" [field]="col.field" matchMode="in" display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false">
                        <ng-template pTemplate="header">
                            <div class="p-px-3 p-pt-3 p-pb-0">
                                <span class="p-text-bold"> {{col.header}} Picker</span>
                            </div>
                        </ng-template>
                        <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                            <p-multiSelect [ngModel]="value" maxSelectedLabels="1" [options]="col.options" placeholder="All" (onChange)="filter($event.value)" optionLabel="label">
                                <ng-template let-option pTemplate="item">
                                    <div class="p-multiselect-representative-option">
                                        <span class="p-ml-1">{{option.label}}</span>
                                    </div>
                                </ng-template>
                            </p-multiSelect>
                        </ng-template>
                    </p-columnFilter>
                </div>
            </th>
        </tr>
        <!-- <tr>
            <th *ngFor="let col of columns" [ngSwitch]="col.field" [hidden]="!col.visibility">
                <p-multiSelect *ngSwitchCase="'Date'" [style]="{'width':'100%'}" [options]="UFColArray.Date"
                    defaultLabel="Date" (onChange)="uf.filter($event.value, col.field, 'in')"
                    (keydown.enter)="$event.preventDefault()" filter="true" resetFilterOnHide="true"
                    (input)="optionFilter($event)" (onPanelShow)="isOptionFilter=true;" [maxSelectedLabels]="1">
                </p-multiSelect>
                <p-multiSelect *ngSwitchCase="'Task'" [style]="{'width':'100%'}" [options]="UFColArray.Task"
                    defaultLabel="Task" (onChange)="uf.filter($event.value, col.field, 'in')"
                    (keydown.enter)="$event.preventDefault()" filter="true" resetFilterOnHide="true"
                    (input)="optionFilter($event)" (onPanelShow)="isOptionFilter=true;" [maxSelectedLabels]="1">
                </p-multiSelect>
                <p-multiSelect *ngSwitchCase="'Type'" [style]="{'width':'100%'}" [options]="UFColArray.Type"
                    defaultLabel="Type" (onChange)="uf.filter($event.value, col.field, 'in')"
                    (keydown.enter)="$event.preventDefault()" filter="true" resetFilterOnHide="true"
                    (input)="optionFilter($event)" (onPanelShow)="isOptionFilter=true;" [maxSelectedLabels]="1">
                </p-multiSelect>
                <p-multiSelect *ngSwitchCase="'Feedbackby'" [style]="{'width':'100%'}" [options]="UFColArray.Feedbackby"
                    defaultLabel="Feedback by" (onChange)="uf.filter($event.value, col.field, 'in')"
                    (keydown.enter)="$event.preventDefault()" filter="true" resetFilterOnHide="true"
                    (input)="optionFilter($event)" (onPanelShow)="isOptionFilter=true;" [maxSelectedLabels]="1">
                </p-multiSelect>
                <p-multiSelect *ngSwitchCase="'EvaluatorSkill'" [style]="{'width':'100%'}" [options]="UFColArray.EvaluatorSkill"
                    defaultLabel="Evaluator SKill" (onChange)="uf.filter($event.value, col.field, 'in')"
                    (keydown.enter)="$event.preventDefault()" filter="true" resetFilterOnHide="true"
                    (input)="optionFilter($event)" (onPanelShow)="isOptionFilter=true;" [maxSelectedLabels]="1">
                </p-multiSelect>
                <p-multiSelect *ngSwitchCase="'Rating'" [style]="{'width':'100%'}" [options]="UFColArray.Rating"
                    defaultLabel="Rating" (onChange)="uf.filter($event.value, col.field, 'in')"
                    (keydown.enter)="$event.preventDefault()" filter="true" resetFilterOnHide="true"
                    (input)="optionFilter($event)" (onPanelShow)="isOptionFilter=true;" [maxSelectedLabels]="1">
                </p-multiSelect>
            </th>
        </tr> -->
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr>
            <td *ngFor="let col of columns" [hidden]="!col.visibility">
                <ng-container *ngIf="col.field != '' && col.field != 'Parameters' &&  col.field !== 'Date' && col.field !== 'Rating'">
                    {{rowData[col.field]}}
                </ng-container>
                <ng-container *ngIf="col.field === 'Date'">
                    {{rowData[col.field] | date:'MMM d, yyyy' }}
                </ng-container>
                <ng-container *ngIf="col.field === 'Rating'">
                    {{rowData[col.field] }}
                    <div *ngIf="showOverlay" class='overlayIcon' (click)="this.showOverlayPanel($event, rowData['ParameterRatings'], ratingOP, displayOverlay)" style="float: right;cursor: pointer;" title="Click to see rating split">
                        <i #displayOverlay class="fa fa-info-circle" aria-hidden="true"></i>
                    </div>
                    <app-rating-overlay #ratingOP></app-rating-overlay>
                </ng-container>
                <ng-container *ngIf="col.field === 'Parameters'">
                    <div [innerHTML]="rowData[col.field]"></div>
                </ng-container>
            </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage" let-columns>
        <tr>
            <td [attr.colspan]="columns.length - 2">
                No Data found
            </td>
        </tr>
    </ng-template>
</p-table>

<!-- <div class="tableLoader" [hidden]='hideLoader'>
    <div id="mainLoader"></div>
    <div id="mainLoaderText">Loading...</div>
</div> -->

<div class="p-d-flex p-flex-column" style="padding:5vw;" *ngIf="!hideLoader">
    <div id="modalInnerLoader"></div>
    <div id="modalInnerLoaderText">Loading...</div>
</div>